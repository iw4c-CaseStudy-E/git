!function(e){var i={idx_expanded:-1,sliceH:0,current:0,totalSlices:0},n={selectSlice:function(n,a,t,d,c){return e.Deferred(function(t){var d,o,s=n.data("expanded"),p=n.data("position"),r=a.not(n);if(s){n.data("expanded",!1),i.idx_expanded=-1,d=i.sliceH,o=i.sliceH;var l=20;n.find(".va-content").hide()}else{n.data("expanded",!0),i.idx_expanded=n.index(),r.data("expanded",!1),d=c.expandedHeight,o=Math.ceil((c.accordionH-c.expandedHeight)/(c.visibleSlices-1));var l=60}var x={height:d+"px",opacity:1,top:(p-1)*o+"px"};n.stop().animate(x,c.animSpeed,c.animEasing,function(){s||n.find(".va-content").fadeIn(c.contentAnimSpeed)}).find(".va-title").stop().animate({lineHeight:l+"px"},c.animSpeed,c.animEasing),r.each(function(){var i,n=e(this),a=n.data("position");i=s?(a-1)*o:p>a?(a-1)*o:(a-2)*o+c.expandedHeight,n.stop().animate({top:i+"px",height:o+"px",opacity:s?1:c.animOpacity},c.animSpeed,c.animEasing,t.resolve).find(".va-title").stop().animate({lineHeight:"20px"},c.animSpeed,c.animEasing).end().find(".va-content").hide()})}).promise()},navigate:function(a,t,d,c,o){if(t.is(":animated"))return!1;var s;-1==i.idx_expanded||o.savePositions?n.slide(a,t,d,c,o):(s=t.eq(i.idx_expanded),e.when(n.selectSlice(s,t,d,c,o)).done(function(){setTimeout(function(){n.slide(a,t,d,c,o)},10)}))},slide:function(a,t,d,c,o){if(-1!==i.idx_expanded&&o.savePositions){if(1===a&&i.idx_expanded===i.totalSlices-1)return!1;if(-1===a&&0===i.idx_expanded)return!1;-1===a&&1===i.idx_expanded?c.fadeOut():c.fadeIn(),1===a&&i.idx_expanded===i.totalSlices-2?d.fadeOut():d.fadeIn()}else{if(1===a&&i.current+o.visibleSlices>=i.totalSlices)return!1;if(-1===a&&0===i.current)return!1;-1===a&&1===i.current?c.fadeOut():c.fadeIn(),1===a&&i.current+o.visibleSlices===i.totalSlices-1?d.fadeOut():d.fadeIn()}var s,p,r=t.eq(i.idx_expanded);return s=1===a?r.next():r.prev(),1===a&&!n.canSlideDown(t,o)||-1===a&&!n.canSlideUp(t,o)?(n.selectSlice(s,t,d,c,o),!1):(1===a?(i.current++,p="-="+i.sliceH,pos_increment=-1):(i.current--,p="+="+i.sliceH,pos_increment=1),t.each(function(n){alert("218");var t=e(this),d=t.data("position");if(o.savePositions&&-1!==i.idx_expanded){var c,r;n===s.index()?(t.data("expanded",!0),i.idx_expanded=t.index(),c=o.expandedHeight,r=(o.accordionH-o.expandedHeight)/(o.visibleSlices-1),t.stop().animate({height:c+"px",opacity:1,top:1===a?(d-2)*r+"px":d*r+"px"},o.animSpeed,o.animEasing,function(){t.find(".va-content").fadeIn(o.contentAnimSpeed)}).find(".va-title").stop().animate({lineHeight:"20px"},o.animSpeed,o.animEasing)):t.data("expanded")?(t.data("expanded",!1),r=(o.accordionH-o.expandedHeight)/(o.visibleSlices-1),t.stop().animate({height:r+"px",opacity:o.animOpacity,top:1===a?"-="+r:"+="+o.expandedHeight},o.animSpeed,o.animEasing).find(".va-title").stop().animate({lineHeight:r+"px"},o.animSpeed,o.animEasing).end().find(".va-content").hide()):(t.data("expanded",!1),r=(o.accordionH-o.expandedHeight)/(o.visibleSlices-1),t.stop().animate({top:1===a?"-="+r:"+="+r},o.animSpeed,o.animEasing))}else t.stop().animate({top:p},o.animSpeed,o.animEasing);t.data().position+=pos_increment}),void 0)},canSlideUp:function(e){var n=e.eq(i.current);return 0!==n.index()?!0:void 0},canSlideDown:function(e,n){var a=e.eq(i.current+n.visibleSlices-1);return a.index()!==i.totalSlices-1?!0:void 0}},a={init:function(a){if(this.length){var t={accordionW:1e3,accordionH:600,visibleSlices:0,expandedHeight:350,animSpeed:250,animEasing:"jswing",animOpacity:.2,contentAnimSpeed:900,savePositions:!0};return this.each(function(){a&&e.extend(t,a);var d=e(this),c=d.find("div.va-slice"),o=d.find("span.va-nav-next"),s=d.find("span.va-nav-prev");i.sliceH=Math.ceil(t.accordionH/t.visibleSlices),i.totalSlices=c.length,t.expandedHeight>t.accordionH?t.expandedHeight=t.accordionH:t.expandedHeight<=i.sliceH&&(t.expandedHeight=i.sliceH+50),d.css({width:t.accordionW+"px",height:t.accordionH+"px"}),t.visibleSlices<i.totalSlices&&o.show(),c.each(function(n){var a=e(this);a.css({top:n*i.sliceH+"px",height:i.sliceH+"px"}).data("position",n+1)}).children(".va-title").css("line-height","20px"),c.bind("click.vaccordion",function(){if(t.visibleSlices>1){var i=e(this);n.selectSlice(i,c,o,s,t)}}),o.bind("click.vaccordion",function(){n.navigate(1,c,o,s,t)}),s.bind("click.vaccordion",function(){n.navigate(-1,c,o,s,t)})})}}};e.fn.vaccordion=function(i){return a[i]?a[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?(e.error("Method "+i+" does not exist on jQuery.vaccordion"),void 0):a.init.apply(this,arguments)}}(jQuery);